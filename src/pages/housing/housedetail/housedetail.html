<ion-header>
  <ion-navbar #navbar color="first" >
    <ion-title>房源修改</ion-title>
  </ion-navbar>

</ion-header>

<ion-content>

  <form [formGroup]="form" *ngIf="data" >
    <div class="bgWhite p10 " *ngIf="lockStatus">
      <font color="red">
        <ion-icon ios="ios-alert-outline" md="md-alert"></ion-icon>
        &nbsp;房源已经锁定，无法下架、修改发布房源信息、上传或删除图片，修改或删除业主委托书，修改或删除钥匙
      </font>
    </div>
    <ion-list>
      <ion-item class="pl12 hdRightInfo1">
        <ion-label>房源ID：{{data.convId.slice(6)}}</ion-label>
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-item  class="pl12">
        <span>楼盘名称：</span>
        <!--<font color="#aaa" class="changes">-->
          <span class="defaults">{{form.value.estateName}}</span>
        <!--</font>-->
      </ion-item>
    </ion-list>
    <ion-list>
      <div class="hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-item class="pl12">
          <ion-label>栋号<i class="text-danger">*</i></ion-label>
          <ion-input type="text" pattern="^[A-Za-z0-9]+$" placeholder="请填写英文或数字" class="tr" formControlName="buildingNo"></ion-input>
        </ion-item>
      </div>
      <valid-error [errors]="errors.buildingNo"  [control]="form.get('buildingNo')"  ></valid-error>
      <div class="hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-item class="pl12">
          <ion-label>单元<i class="text-danger">*</i></ion-label>
          <ion-input type="number" pattern="[0-9]*" class="tr" formControlName="unitNo"></ion-input>
        </ion-item>
      </div>
      <valid-error [errors]="errors.unitNo"  [control]="form.get('unitNo')"  ></valid-error>
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>楼层<i class="text-danger">*</i></ion-label>
          <ion-input type="number" pattern="[0-9]*" formControlName="floorNo" placeholder="请填写数字"
                     [ngClass]="{'form-control-danger':form.get('floorNo')&&form.get('floorNo').touched}">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">层</span>
      </div>
      <valid-error [errors]="errors.floorNo"  [control]="form.get('floorNo')"  ></valid-error>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>房间号<i class="text-danger">*</i></ion-label>
        <ion-input type="number"  pattern="[0-9]*" placeholder="请输入房间号" formControlName="houseNo" class="p0">
        </ion-input>
      </ion-item>
      <valid-error [errors]="errors.houseNo"  [control]="form.get('houseNo')"  ></valid-error>
    </ion-list>
    <ion-list class="m10">
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>建筑面积<i class="text-danger">*</i></ion-label>
          <ion-input type="number" formControlName="spaceSize" placeholder="请填写数字" (ionChange)="sizes()">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">平</span>
      </div>
      <div *ngIf="form.value.spaceSize>1000000000" class="valid-error">
        <p>*超出长度!</p>
      </div>
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>套内面积<i class="text-danger">*</i></ion-label>
          <ion-input type="number" formControlName="innerSpaceSize" (ionChange)="sizes()">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">平</span>
      </div>
      <div *ngIf="form.value.innerSpaceSize>1000000000" class="valid-error">
        <p>*超出长度!</p>
      </div>
      <div *ngIf="sizeCheck" style="color: red;padding: 5px">*室内面积不能大于建筑面积!</div>
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>价格<i class="text-danger">*</i></ion-label>
          <ion-input type="number" pattern="[0-9]*" formControlName="propertyPrice">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">万</span>
      </div>

      <ion-list (click)="clickHx()">
        <button ion-item class="pl12" *ngIf="HxRight">
          <font>户型<i class="text-danger">*</i></font>
        </button>
        <ion-item class="pl12" *ngIf="HxDown" >
          <font>户型<i class="text-danger">*</i></font>
          <i class="iconfont icon-xia"></i>
        </ion-item>
      </ion-list>
      <ion-list *ngIf="showHx">
        <ion-item class="pl12">
          <ion-label>室<i class="text-danger">*</i></ion-label>
          <ion-select okText="确定"  cancelText="关闭"   formControlName="bedrooms" [placeholder]="'请选择'" [selectOptions]="selectTitle('室')">
            <ion-option value="1">一室</ion-option>
            <ion-option value="2">二室</ion-option>
            <ion-option value="3">三室</ion-option>
            <ion-option value="4">四室</ion-option>
            <ion-option value="5">五室</ion-option>
          </ion-select>
        </ion-item>
        <ion-item class="pl12">
          <ion-label>厅<i class="text-danger">*</i></ion-label>
          <ion-select okText="确定"  cancelText="关闭"  formControlName="halls"  [placeholder]="'请选择'" [selectOptions]="selectTitle('厅')">
            <ion-option value="1">1厅</ion-option>
            <ion-option value="2">2厅</ion-option>
            <ion-option value="3">3厅</ion-option>
            <ion-option value="4">4厅</ion-option>
            <ion-option value="5">5厅</ion-option>
          </ion-select>
        </ion-item>
        <ion-item class="pl12">
          <ion-label>卫<i class="text-danger">*</i></ion-label>
          <ion-select okText="确定"  cancelText="关闭"  formControlName="bathrooms" [placeholder]="'请选择'" [selectOptions]="selectTitle('卫')">
            <ion-option value="1">1卫</ion-option>
            <ion-option value="2">2卫</ion-option>
            <ion-option value="3">3卫</ion-option>
            <ion-option value="4">4卫</ion-option>
            <ion-option value="5">5卫</ion-option>
          </ion-select>
        </ion-item>
        <ion-item class="pl12">
          <ion-label>厨<i class="text-danger">*</i></ion-label>
          <ion-select okText="确定"  cancelText="关闭"   formControlName="kitchens"  [placeholder]="'请选择'" [selectOptions]="selectTitle('厨')">
            <ion-option value="1">一厨</ion-option>
            <ion-option value="2">二厨</ion-option>
            <ion-option value="3">三厨</ion-option>
            <ion-option value="4">四厨</ion-option>
            <ion-option value="5">五厨</ion-option>
          </ion-select>
        </ion-item>
        <ion-item class="pl12">
          <ion-label>阳<i class="text-danger">*</i></ion-label>
          <ion-select okText="确定"  cancelText="关闭"  formControlName="balconies"  [placeholder]="'请选择'" [selectOptions]="selectTitle('阳')">
            <ion-option value="1">一阳</ion-option>
            <ion-option value="2">二阳</ion-option>
            <ion-option value="3">三阳</ion-option>
            <ion-option value="4">四阳</ion-option>
            <ion-option value="5">五阳</ion-option>
          </ion-select>
        </ion-item>
      </ion-list>

      <ion-item class="pl12">
        <ion-label>朝向<i class="text-danger">*</i></ion-label>
        <ion-select okText="确定" cancelText="关闭" [placeholder]="'请选择'" formControlName="orientation" [selectOptions]="selectTitle('朝向')">
          <ion-option *ngFor="let item of localCode['orientation'] | codeValue"  value="{{item.val}}">{{item.name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item class="pl12">
        <ion-label>装修<i class="text-danger">*</i></ion-label>
        <ion-select okText="确定" cancelText="关闭" [placeholder]="'请选择'" formControlName="decoration" [selectOptions]="selectTitle('装修')">
          <ion-option *ngFor="let item of localCode['decoration'] | codeValue"  value="{{item.val}}">{{item.name}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>
    <ion-list class="m10">
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>业主姓名<i class="text-danger">*</i></ion-label>
        <ion-input type="text" placeholder="请填写业主姓名" formControlName="contact">
        </ion-input>
      </ion-item>
      <valid-error [errors]="errors.contact"  [control]="form.get('contact')"  ></valid-error>

      <ion-item class="pl12" [hidden]="!sensitiveInfo">
        <ion-label>业主性别<i class="text-danger">*</i></ion-label>
        <ion-select okText="确定"  cancelText="关闭" formControlName="sex" [selectOptions]="selectTitle('业主性别')">
          <ion-option value="male">男</ion-option>
          <ion-option value="female">女</ion-option>
        </ion-select>
      </ion-item>
      <valid-error [errors]="errors.sex"  [control]="form.get('sex')"  ></valid-error>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>业主电话1<i class="text-danger">*</i></ion-label>
        <ion-input type="number" pattern="[0-9]*"  placeholder="请填写业主电话"  formControlName="contactInfo">
        </ion-input>
      </ion-item>
      <valid-error [errors]="errors.contactInfo"  [control]="form.get('contactInfo')"  ></valid-error>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>业主电话2</ion-label>
        <ion-input type="number" pattern="[0-9]*" placeholder="可选填" formControlName="contactInfo2" >
        </ion-input>
      </ion-item>
      <valid-error [errors]="errors.contactInfo2"  [control]="form.get('contactInfo2')"  ></valid-error>
    </ion-list>

    <ion-list (click)="clickIntention()">
      <button ion-item class="pl12" *ngIf="right">
        <font>更多<i class="text-danger">*</i></font>
      </button>
      <ion-item class="pl12" *ngIf="down" >
        <font>更多<i class="text-danger">*</i></font>
        <i class="iconfont icon-xia"></i>
      </ion-item>
    </ion-list>
    <ion-list *ngIf="showIntention">
      <ion-item class="pl12">
        <ion-label>建筑类型<i class="text-danger">*</i></ion-label>
        <ion-select okText="确定"   [placeholder]="'请选择'"  formControlName="buildingType" cancelText="关闭" [selectOptions]="selectTitle('建筑类型')">
          <ion-option value="{{x.val}}" *ngFor="let x of localCode['buildingType'] | codeValue">{{x.name}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item class="pl12">
        <ion-label>配备电梯<i class="text-danger">*</i></ion-label>
        <ion-select okText="确定"  formControlName="hasElevator"  [placeholder]="'请选择'" cancelText="关闭" [selectOptions]="selectTitle('配备电梯')">
          <ion-option value="0">无</ion-option>
          <ion-option value="1">有</ion-option>
        </ion-select>
      </ion-item>

      <ion-item class="pl12">
        <ion-label>房屋用途<i class="text-danger">*</i></ion-label>
        <ion-select okText="确定"  formControlName="buzzType"  [placeholder]="'请选择'" cancelText="关闭" [selectOptions]="selectTitle('房屋用途')">
          <ion-option value="{{x.val}}" *ngFor="let x of localCode['buzzType'] | codeValue">{{x.name}}</ion-option>
        </ion-select>
      </ion-item>

      <div class="allStyle">
        <ion-row>
          <ion-col col-4 class="p0">
            <span class="upHe">楼户比例</span>
          </ion-col>
          <ion-col col-4>
            <input type="number"  formControlName="elevators"  class="upI" />
            <span class="upPostion">梯</span>
          </ion-col>
          <ion-col col-4>
            <input type="number"  formControlName="apartments" class="upI"/>
            <span class="upPostion">户</span>
          </ion-col>
        </ion-row>
      </div>

    </ion-list>

    <ion-item class="pl12 m10">
      <ion-label>房源标签</ion-label>
      <ion-select okText="确定" cancelText="关闭"  formControlName="tagsStr"   multiple="true" [placeholder]="'请选择'">
        <ion-option value="{{item.tagCode}}" *ngFor="let item of houLabel;let i = index">{{item.tagDesc}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-list (click)="godesc()" class="m10">
      <button ion-item class="pl12">
        房源描述
      </button>
    </ion-list>
    <ion-list class="m10" [hidden]="!sensitiveInfo">
      <button ion-item class="pl12" tappable (click)="lookHouse()">
        房源实勘
      </button>
      <button ion-item class="pl12" tappable (click)="letterOfAttorney()">
        业主委托书
      </button>
      <button ion-item class="pl12" tappable (click)="goKey()">
        钥匙
      </button>
      <!--<button ion-item class="pl12" tappable (click)="rolepeople()">-->
        <!--角色人-->
        <!--<font color="#aaa" class="changes"></font>-->
      <!--</button>-->
    </ion-list>
    <ion-grid>
      <ion-row>
        <!--<ion-col col-6>-->
          <!--&lt;!&ndash;<button ion-button full color="danger" *ngIf="follow" class="radius" (click)="goFollow()">跟进</button>&ndash;&gt;-->
          <!--<button ion-button full color="danger" class="radius" (click)="goFollow()">跟进</button>-->
        <!--</ion-col>-->
        <ion-col col-12>
          <button ion-button class="status" full color="danger" class="radius" (click)="save()" [disabled]="lockStatus">确认修改</button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>

  <!-- 当房源被锁定时 -->
  <!-- <form>
    <div class="bgWhite p10">
      <font color="red">房源即将成交已经锁定，无法下架，修改房源信息，上传或删除图片，修改或删除住委托书，修改或删除钥匙。</font>
    </div>

    <ion-list class="m10">
      <ion-item class="pl12 hdRightInfo1">
        <ion-label>房间ID</ion-label>
        <ion-input type="text" value="12163" class="p0">
        </ion-input>

      </ion-item>
      <button ion-item class="pl12" (click)="goserach()">
        选择楼盘
        <font color="#aaa" class="changes">碧桂园生态城</font>
      </button>
      <ion-item class="pl12" [hidden]="!sensitiveInfo">
        <ion-label>栋号</ion-label>
        <ion-select>
          <ion-option value="change" selected>2栋</ion-option>
          <ion-option value="nes">1栋</ion-option>
          <ion-option value="n64">2栋</ion-option>
        </ion-select>
      </ion-item>
      <ion-item class="pl12" [hidden]="!sensitiveInfo">
        <ion-label>单元</ion-label>
        <ion-select>
          <ion-option value="change" selected>2单元</ion-option>
          <ion-option value="nes">1单元</ion-option>
          <ion-option value="n64">2单元</ion-option>
        </ion-select>
      </ion-item>
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>楼层</ion-label>
          <ion-input type="text" value="11">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">层</span>
      </div>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>房间号</ion-label>
        <ion-input type="text" value="202" class="p0">
        </ion-input>
      </ion-item>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>业主姓名</ion-label>
        <ion-input type="text" value="张三">
        </ion-input>
      </ion-item>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>业主电话1</ion-label>
        <ion-input type="text" value="1555555555">
        </ion-input>
      </ion-item>
      <button ion-item class="pl12" (click)="presentActionSheet()">
        角色人
        <font color="#aaa" class="changes">请选择</font>
      </button>
    </ion-list>
    <ion-grid>
      <ion-row>
        <ion-col col-12>
          <button ion-button full  color="danger" *ngIf="showInfos"  (click)="showInfo()" class="radius">调取敏感信息</button>
        </ion-col>
        <ion-col col-6>
          <button ion-button full  color="danger" *ngIf="showInfos"  (click)="showInfo()" class="radius">调取敏感信息</button>
          <button ion-button full  color="danger" *ngIf="follow"  class="radius">跟进</button>
        </ion-col>
        <ion-col col-6>
          <button ion-button class="redact" color="light">确认修改</button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form> -->
  <!-- 修改价格审核中 -->
  <!-- <form>
    <ion-list>
      <ion-item class="pl12 hdRightInfo1">
        <ion-label>房间ID</ion-label>
        <ion-input type="text" value="12163" class="p0">
        </ion-input>

      </ion-item>
      <button ion-item class="pl12" (click)="goserach()">
        选择楼盘
        <font color="#aaa" class="changes">碧桂园生态城</font>
      </button>
      <ion-item class="pl12" [hidden]="!sensitiveInfo">
        <ion-label>栋号</ion-label>
        <ion-select>
          <ion-option value="change" selected>2栋</ion-option>
          <ion-option value="nes">1栋</ion-option>
          <ion-option value="n64">2栋</ion-option>
        </ion-select>
      </ion-item>
      <ion-item class="pl12" [hidden]="!sensitiveInfo">
        <ion-label>单元</ion-label>
        <ion-select>
          <ion-option value="change" selected>2单元</ion-option>
          <ion-option value="nes">1单元</ion-option>
          <ion-option value="n64">2单元</ion-option>
        </ion-select>
      </ion-item>
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>楼层</ion-label>
          <ion-input type="text" value="11">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">层</span>
      </div>
      <ion-item class="pl12 hdRightInfo1" [hidden]="!sensitiveInfo">
        <ion-label>房间号</ion-label>
        <ion-input type="text" value="202" class="p0">
        </ion-input>
      </ion-item>
    </ion-list>
    <ion-list class="m10">
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>建筑面积</ion-label>
          <ion-input type="text" value="97">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">平</span>
      </div>
      <div class="hdRightInfo">
        <ion-item class="pl12">
          <ion-label>套内面积</ion-label>
          <ion-input type="text" value="97">
          </ion-input>
        </ion-item>
        <span class="hdRightInfo">平</span>
      </div>
      <div class="hdRightInfo2">
        <ion-item class="pl12">
          <ion-label>价格</ion-label>
        </ion-item>
        <span>
          <font size="1">680万（22888元/m2）</font>
          <br/>
          <font color="red" size="1">修改后的价格为680万(22888元/m2)</font>
        </span>
      </div>
      <ion-item class="pl12">
        <ion-label>户型</ion-label>
        <ion-select>
          <ion-option value="change" selected>1栋</ion-option>
          <ion-option value="nes">1栋</ion-option>
          <ion-option value="n64">2栋</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>
    <ion-grid>
      <ion-row>
        <ion-col col-6>
          <button ion-button full  color="danger" *ngIf="showInfos"  (click)="showInfo()" class="radius">调取敏感信息</button>
          <button ion-button full  color="danger" *ngIf="follow"  class="radius">跟进</button>
        </ion-col>
        <ion-col col-6>
          <button ion-button class="redact" color="light">确认修改</button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form> -->

</ion-content>





