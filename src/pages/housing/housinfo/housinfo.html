<!--
  房源详情页面
-->
<ion-header  no-border [ngClass]="{updeteHeader:testHeader}">
  <ion-navbar  #navbar color="first" transparent #header>
    <button  ion-button="bar-button" *ngIf="modals" (click)="dismiss()">
      <ion-icon name="arrow-back"></ion-icon>
    </button>
    <ion-buttons end>
      <button ion-button icon-only tappable (click)="tip()">
        <ion-icon name="guanzhu"></ion-icon>
        <ion-icon name="fenxiang"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content  *ngIf="houseData" id="contents" (ionScroll)="scrollHandler($event)" [ngClass]="{'updateScroll':houseData&&!houseData.closePropertyShow}">
  <!--<div class="pops"></div>-->
  <!--propertyPics-->
  <ion-slides #mySlider  style=""  autoplay="3000" pager="true" loop="true" paginationType="fraction">
    <ion-slide *ngIf="!imgJson">
      <img src="assets/imgs/banner.png" width="100%" height="400">
    </ion-slide>
    <!--assets/imgs/default.jpg-->
    <ng-container *ngIf="imgJson">
      <ion-slide  *ngFor="let item of  imgList(imgJson) ;let i = index"  pager="true">
        <img [src]="imgHeader+item.imagePath+smImgSign" [imgGallery]="{data:imgJson,index:i}" width="100%" >
      </ion-slide>
    </ng-container>
  </ion-slides>
  <!--<div class="bannerPop"></div>-->
  <div class="wrap bgWhite">
    <h4 >
      {{houseData.estateName}}
      {{houseData.bedrooms}}室
      {{houseData.halls}}厅
    </h4>
    <ion-grid>
      <ion-row>
        <ion-col col-4 class="p0" *ngIf="houseData?.propertyPrice==0">
          <p class="abnormal">异常价格</p>
          <div class="houseInfo ellipsis">
            {{houseData?.propertyAuditContentVo.abnormalPrice}}
          </div>
          <div class="middleHouseType"></div>
        </ion-col>
        <ion-col col-4 class="p0" *ngIf="houseData?.propertyPrice!=0">
          <p class="tieDefault">总价</p>
          <div class="houseInfo ellipsis">
            {{houseData?.propertyPrice}}
            {{houseData?.propertyPriceUnit==1?'万':'元'}}
           </div>
          <div class="middleHouseType"></div>
        </ion-col>
        <ion-col col-4  class="infoPadding p0">
          <p class="tieDefault">户型</p>
          <div class="houseInfo">
            {{houseData?.bedrooms}}室
            {{houseData?.halls}}厅
            {{houseData?.bathrooms}}卫
            <!--{{houseData.kitchens}}厨-->
            <!--{{houseData.balconies}}阳-->
          </div>
          <div class="middleHouseType"></div>
        </ion-col>
        <ion-col col-4 class="infoPadding p0">
          <p class="tieDefault">建筑面积</p>
          <div class="houseInfo ellipsis">{{houseData?.spaceSize}}m²</div>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="m10 ">
      <!--房源标签-->
      <div class="tips">
        <div class="tips"  >
          <a *ngFor=" let x of tagPipe(houseData?.tagsStr)" class="m5"
             [ngClass]="{shen:tagName(x)=='审',xiang:tagName(x)=='享',kzks:tagName(x)=='可租可售',bxg:tagName(x)=='不限购',yzjs:tagName(x)=='业主急售',myys:tagName(x)=='免营业税',mwwy:tagName(x)=='满五唯一',dhy:tagName(x)=='带花园',yao:tagName(x)=='钥',wei:tagName(x)=='委',kan:tagName(x)=='勘',tie:tagName(x)=='铁',guan:tagName(x)=='关',fa:tagName(x)=='fa'}">{{tagName(x)}}</a>
        </div>
      </div>

      <!--房源信息-->
      <ion-grid class="p0">
        <ion-row>
          <ion-col col-7>
            <span class="defaults">房源编号:</span> <span>{{houseData.convIdReq}}</span>
          </ion-col>
          <ion-col col-5>
            <span class="defaults"> 楼层：</span>{{houseData.floorNo}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-7>
            <div *ngIf="!houseData?.unitPriceAudit">
              <span class="defaults"> 单价：</span>
              <span> {{unitPrice(houseData)}} 元/m²</span>
            </div>
            <div *ngIf="houseData?.unitPriceAudit" class="priceAbnormal">
              <span> 异常单价：</span>
              {{houseData?.propertyAuditContentVo.abnormalUnitPrice}}
              <span *ngIf="houseData?.propertyAuditContentVo.abnormalPropertyPriceUnit==1"> 元/m²</span>
            </div>
          </ion-col>
          <ion-col col-5>
           <span class="defaults">  装修：</span>{{ houseInfoPipe(houseData?.decoration,decorationJson)}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-7>
            <span class="defaults"> 房屋用途：</span>{{ houseInfoPipe(houseData?.buzzType,buzzTypeJson) }}
          </ion-col>
          <ion-col col-5>
            <span class="defaults"> 建筑类型：</span> {{ houseInfoPipe(houseData?.buildingType,buildingTypeJson) }}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-7 >
            <span class="defaults"> 建筑面积：</span>{{houseData?.spaceSize}}m²
          </ion-col>
          <ion-col col-5>
            <span class="defaults"> 朝向：</span>{{ orentationPipe(houseData?.orientation) }}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-7>
            <span class="defaults"> 套内面积：</span>{{houseData?.innerSpaceSize}}m²
          </ion-col>
          <ion-col col-5>
            <span class="defaults"> 配备电梯：</span>{{houseData?.hasElevator==1?'无':'有'}}
          </ion-col>
        </ion-row>
        <ion-row>
        <ion-col col-7>
          <span class="defaults"> 录入时间：</span>{{houseData?.createdTime | date:'yyyy/MM/dd'}}
        </ion-col>
        <ion-col col-5>
          <span class="defaults"> 归属人：</span>
          {{houseData?.realtorId}}
        </ion-col>
      </ion-row>
      </ion-grid>
      <!--更多(业主信息,小区信息)-->
      <div class="p10" *ngIf="!houseData?.unitPriceAudit">
        <button  ion-button color="danger" full (click)="goMore()" class="clearMore">更多信息</button>
      </div>
      <ion-row  *ngIf="houseData?.unitPriceAudit">
        <ion-col col-6 [hidden]=true>
          <button ion-button class="priAudit" full (click)="goAudit()">价格审核</button>
        </ion-col>
        <ion-col col-12>
          <button ion-button color="danger" full (click)="goMore()" class="clearMore">更多信息</button>
        </ion-col>
      </ion-row>
    </div>
  </div>
  <div class="m10 bgWhite describe" *ngIf="houseData?.propertyDesc">
    <button ion-item class="clear" tappable (click)="describes()" *ngIf="houseData?.propertyDesc.length>70">房源描述</button>
    <div style="padding: 10px 0;font-size: 1.5rem;" *ngIf="houseData?.propertyDesc.length<70">房源描述</div>
    <!--[innerHtml]="houseData?.propertyDescApp"-->
    <div *ngIf="houseData?.propertyDesc.length<70" class="descCSS" [innerHtml]="descForAPP(houseData?.propertyDescApp)" >
    </div>
    <div (click)="describes()" tappable class="descCSS" [ngClass]="{clamp:houseData?.propertyDesc.length>70}" *ngIf="houseData.propertyDesc.length>70"  [innerHtml]="descForAPP(houseData?.propertyDescApp)">
    </div>
  </div>
  <!--&&letteratorneyData?.delegateDocPics[0].auditStatus==1-->
  <div class="m10 bgWhite wt" *ngIf="letteratorneyData&&houseData&&houseData.closePropertyShow">
    <ion-row>
      <ion-col col-8>
        <div class="m5">业主委托书</div>
        <p>编号：{{letteratorneyData.delegateDocSn}}</p>
        <p *ngIf="letteratorneyData.delegateBeginTm">起始时间：{{letteratorneyData.delegateBeginTm | date:'yyyy/MM/dd'}}</p>
        <p *ngIf="letteratorneyData?.delegateEndTm!='null'&&letteratorneyData?.delegateEndTm!='-1'">截止时间：{{letteratorneyData?.delegateEndTm | date:'yyyy/MM/dd'}}</p>
      </ion-col>

      <ion-col class="mt5" col-4 *ngFor="let item of letteratorneyData.delegateDocPics">
        <img [src]="imgHeader+item.imagePath+imgSign" alt="" width="100%" height="80"  [imgGallery]="{data:letteratorneyData.delegateDocPics,index:i}">
      </ion-col>
    </ion-row>
  </div>
  <!--&&keyData.keyDlgtFilePics[0].auditStatus==1-->
  <div class="m10 bgWhite wt" *ngIf="keyData&&houseData&&houseData.closePropertyShow">
    <ion-row>
      <ion-col col-8>
        <div class="m5">钥匙</div>
        <p>钥匙编号：{{keyData.keysn}}</p>
        <p class="m5">钥匙存储地址：{{keyData.keyAddress}}</p>
      </ion-col>
      <ion-col class="mt5" col-4 *ngFor="let item of keyData.keyDlgtFilePics;let i =index">
        <img [src]="imgHeader+item.imagePath+smImgSign" alt="" width="100%" height="80"  [imgGallery]="{data:keyData.keyDlgtFilePics,index:i}"   class="">
      </ion-col>
    </ion-row>
  </div>
  <!--*ngIf="houseData&&houseData.closePropertyShow"-->
  <ion-list class="m10" >
    <button class="clear" ion-item  style="padding: 0 16px" tappable (click)="rolepeople()">
      角色人
      <font color="#aaa" class="changes"></font>
    </button>
  </ion-list>
</ion-content>
  <!--[offline]="offlineOpts"-->
  <!--<baidu-map-->
    <!--ak="8azVgQbZR9irKHBOsqMzi8CAT7l1gtjt"-->
    <!--[options]="opts"-->
    <!--(onMapLoaded)="loadMap($event)"-->
    <!--(onMarkerClicked)="clickMarker($event)"-->
  <!--&gt;</baidu-map>-->

<ion-footer *ngIf="houseData&&houseData.closePropertyShow" >
  <ion-row class="footers">
    <ion-col col-2 class="tc"  (click)="record()" *ngIf="houseData&&houseData.closePropertyShow ">
      <ion-icon name="time-outline" style="    display: block;
    font-size: 2.5rem;
    margin-top: 5px;"></ion-icon>
      <span style="font-size: 1.2rem">记录</span>
    </ion-col>
    <ion-col col-5 *ngIf="houseData&&houseData.closePropertyShow">
      <button ion-button class="follows" tappable (click)="goFollow()">跟进</button>
    </ion-col>
    <ion-col col-5  *ngIf="houseData&&houseData.closePropertyShow">
      <button ion-button tappable class="compile" (click)="edit()">编辑</button>
    </ion-col>
  </ion-row>
</ion-footer>
