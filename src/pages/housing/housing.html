<ion-header id="propertyHeader">
  <ion-navbar>
    <ion-searchbar placeholder="楼盘搜索" [(ngModel)]="floorName"   class="serInput" (click)="allSearch()"></ion-searchbar>
    <ion-icon ios="ios-add" md="md-add" class="adds " (click)="addHouse()"></ion-icon>
  </ion-navbar>

  <ion-row class="houseMenu" >
    <ion-col col-3 class="tc" (click)="showMenu1()">

      <span >{{searchDict}}{{ searchArea}} </span>
      <span *ngIf="!searchDict">区域</span>
      <ion-icon name="md-arrow-dropdown"></ion-icon>
    </ion-col>
    <ion-col col-3 class="tc" (click)="showMenu2()">

      <span *ngIf="searchFloorNum==2">{{housePipe(params.bedroomType)}}</span>
      <span [hidden]="searchFloorNum==2"> 户型</span>
      <ion-icon name="md-arrow-dropdown"></ion-icon>

    </ion-col>
    <ion-col col-3 class="tc" (click)="showMenu3()">
      <!--<span [ngClass]="{xiaoQu:params.estateId}" >{{ estatePipe(params.estateId)}}</span>-->
      <!--ngIf="params.hasElevator==null"-->
      <span >{{elevatorPipe(params.hasElevator) }}</span>
      <!--*ngIf="params.hasElevator!=null"-->
      <span [hidden]="params.hasElevator=='0'||params.hasElevator=='1'"> 电梯 </span>
      <ion-icon name="md-arrow-dropdown" [ngClass]="{upIcon:params.estateId}"></ion-icon>
    </ion-col>
    <ion-col col-3 class="tc" (click)="mores()">
      更多
      <ion-icon name="md-arrow-dropdown"></ion-icon>
    </ion-col>
  </ion-row>

</ion-header>

<ion-content no-bounce >

  <ion-refresher
    [pullMax]="480"
    [pullMin]="180"
    (ionRefresh)="doRefresh($event)" class="refresh">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="获取最新数据..."
      refreshingSpinner="circles"
      refreshingText="正在加载数据中...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-grid class="p0 relative" >
    <ion-row class="bgWhite houseMain" *ngFor=" let item of pageData; index as i;">
      <!--<h3>{{i+1}}</h3>-->
      <ion-col col-12 (click)="goHouseDetail(item)">
        <ion-row>
          <ion-col col-4 >
            <img  [offset]="offset" [defaultImage]="'assets/imgs/default.jpg'"
                  [lazyLoad]="imgHeader+pic(item?.propertyPics)"
                  alt="" width="90%" height="100px">
          </ion-col>
          <ion-col col-8>
            <div class="ellipsis">
              <font size="3">{{item.estateName}}</font>
            </div>
            <p class="m5 ellipsis" >
              <font size="2" color="#aaa">
                <!--ID:<span>{{item.convId}}</span>-->
                <span class="font12">{{item.standardAddress}}</span>
              </font>
            </p>
            <ion-row>
              <ion-col col-5 class="p0 ellipsis">
                  <span class="font12">建面 <span>{{item.spaceSize}}㎡</span>
                    <!--<sup>2</sup>-->
                  </span>
              </ion-col>
              <ion-col col-7 class="tr p0">
                <font color="red" class="font12">
                  <span
                    *ngIf="item.propertyPriceUnit==1">{{item.propertyPrice*1/item.spaceSize*1000 | toParseInt}}</span>
                  <span *ngIf="item.propertyPriceUnit=='2'">{{item.propertyPrice*1/item.spaceSize}}</span>
                  元/㎡
                  <!--<sup>2</sup>-->
                </font>
              </ion-col>
            </ion-row>
            <div class="tips" [ngClass]="{uDis:item.tagsStr}" *ngIf="!tagPipe(item.tagsStr)">
              <a *ngFor=" let x of tagPipe(item.tagsStr)" class="m5">{{tagName(x)}}</a>
            </div>
            <div>
              <!--realtorName-->
              <span class="font12">{{item.createdTime | date:'yyyy/MM/dd'}}录入</span>
              <span class="font12">归属人：{{item. realtorId }}</span>
            </div>
          </ion-col>
        </ion-row>
      </ion-col>

      <ion-col col-12 class="houseStatus">
        <ion-row>
          <ion-col col-4 class="tc" (click)="goFollow(item)">
            <a>跟进</a>
          </ion-col>
          <ion-col col-4 class="tc" (click)="goAddLook(item)">
            <a>带看</a>
          </ion-col>
          <ion-col col-4 class="tc" (click)="goCloseHouse(item)">
            <a>关闭</a>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>


    <div class="content_page"  style="margin-top: 15px">
      <div *ngIf="hasData&&pageData ==null" class="tc">
        <ion-spinner item-start name="ios"></ion-spinner>
        加载数据中...
      </div>
      <div *ngIf="!hasData"  class="tc">
        抱歉！没有找到数据
      </div>
    </div>

    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="正在加载中...">

      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
    <div *ngIf="all&&hasData" class="sTips">已加载全部
    </div>
  </ion-grid>
</ion-content>
<div class="popLocation">
  <!-- 区域 -->
  <ion-grid class="lists p0" [hidden]="!show" [ngClass]="{transitions:show}" style="">
    <ion-row *ngIf="aeraShow">
      <ion-col col-12 class="p0">
        <div class="leftChange">
          <!--<a (click)="unlimited()" [ngClass]="{'active': isActive}">不限</a>-->
          <a *ngFor=" let item of area" (click)="go(item)">{{item.name}}</a>
        </div>
        <!--<ion-row>-->
        <!--<ion-col col-6>-->
        <!--<div class="p5 p0">-->
        <!--<button ion-button full color="light" (click)="reset()">重置</button>-->
        <!--</div>-->
        <!--</ion-col>-->
        <!--<ion-col col-6>-->
        <!--<div class="p5 ">-->
        <!--<button ion-button full color="danger" (click)="search()" >确定</button>-->
        <!--</div>-->
        <!--</ion-col>-->
        <!--</ion-row>-->
      </ion-col>
    </ion-row>

    <!--点击后显示-->
    <ion-row *ngIf="tradArea">
      <ion-col col-6 class="p0">
        <div class="leftChange">
          <!--<a (click)="unlimited()" [ngClass]="{'active': isActive(this.area)}">不限</a>-->
          <a *ngFor=" let item of area" (click)="go(item)"  [ngClass]="{'active': isActive(item)}">{{item.name}}</a>
        </div>
        <!--<div class="p5 ">-->
        <!--<button ion-button full color="light">重置</button>-->
        <!--</div>-->
      </ion-col>
      <ion-col col-6 class="p0">
        <div class="leftChange updateBg">
          <ion-list radio-group [(ngModel)]="params.area">
            <ion-item *ngIf="this.district != unde">
              <ion-label>不限</ion-label>
              <ion-radio value="0" (ionSelect)="bx()"></ion-radio>
            </ion-item>
            <ion-item *ngFor=" let items of district;let i = index" >
              <ion-label>{{items.name}}</ion-label>
              <ion-radio value="{{items.id}}" (ionSelect)="search()"></ion-radio>
            </ion-item>
          </ion-list>
          <div *ngIf="hTips">暂无该地区！</div>
        </div>
        <!--<div class="p5 ">-->
        <!--<button ion-button full color="danger" (click)="search()">确定</button>-->
        <!--</div>-->
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- 户型 -->
  <div class="lists houseType" [hidden]="!houseType" >
    <ion-list radio-group [(ngModel)]="params.bedroomType" class="scrollC">
      <ion-item *ngFor="let y of houseJSON">
        <ion-label>{{y.name}}</ion-label>
        <ion-radio value={{y.val}} (ionSelect)="search()"></ion-radio>
      </ion-item>
    </ion-list>
    <!--<div class="btns">-->
    <!--<button ion-button full color="danger" (click)="search()">确定</button>-->
    <!--</div>-->
  </div>

  <!-- 电梯 -->
  <div class="lists houseType" [hidden]="!housingEstate" >
    <ion-list radio-group [(ngModel)]="params.hasElevator" class="scrollC">
      <ion-item *ngFor="let y of hasElevatorJson">
        <ion-label>{{y.name}}</ion-label>
        <ion-radio value={{y.val}} (ionSelect)="search()"></ion-radio>
      </ion-item>
    </ion-list>
  </div>
  <!-- 更多 -->
  <div class="lists houseType" *ngIf="more">
    <ion-list radio-group [(ngModel)]="params.param" class="scrollC">
      <ion-item>
        <ion-label>只看我的房源</ion-label>
        <ion-radio  value="6" (ionSelect)="search()"></ion-radio>
      </ion-item>

      <ion-item>
        <ion-label>待处理申请关闭</ion-label>
        <ion-radio value="1" (ionSelect)="search()"></ion-radio>
      </ion-item>
    </ion-list>
    <!--<div class="p15 btns">-->
    <!--<button ion-button full color="danger" (click)="search()">确定</button>-->
    <!--</div>-->
  </div>

</div>
<div class="pop" *ngIf="pop" (click)="pops()"></div>



