<ion-header>

  <ion-navbar>
    <ion-title>房源</ion-title>
    <ion-icon ios="ios-add" md="md-add" class="adds" (click)="addHouse()"></ion-icon>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-grid class="p0" style="position: relative;">
    <div style="position: relative;">
      <ion-row class="houseMenu">
        <ion-col col-3 class="tc" (click)="showMenu1()">
          区域
          <ion-icon name="md-arrow-dropdown"></ion-icon>
        </ion-col>
        <ion-col col-3 class="tc" (click)="showMenu2()">
          户型
          <ion-icon name="md-arrow-dropdown"></ion-icon>
        </ion-col>
        <ion-col col-3 class="tc" (click)="showMenu3()">
          小区
          <ion-icon name="md-arrow-dropdown"></ion-icon>
        </ion-col>
        <ion-col col-3 class="tc" (click)="showMenu4()">
          更多
          <ion-icon name="md-arrow-dropdown"></ion-icon>
        </ion-col>
      </ion-row>

      <!-- 区域 -->
      <ion-grid class="lists p0" *ngIf="show">
        <ion-row *ngIf="aeraShow">
          <ion-col col-12 class="p0">
            <div class="leftChange">
              <a *ngFor=" let item of area" (click)="go(item)">{{item.name}}</a>
            </div>
            <ion-row>
              <ion-col col-6>
                <div class="p5 p0">
                  <button ion-button full color="light">重置</button>
                </div>
              </ion-col>
              <ion-col col-6>
                <div class="p5 ">
                  <button ion-button full color="danger">确定</button>
                </div>
              </ion-col>
            </ion-row>
          </ion-col>


        </ion-row>

        <!--点击后显示-->
        <ion-row *ngIf="tradArea">
          <ion-col col-6 class="p0">
            <div class="leftChange">
              <a *ngFor=" let item of area" (click)="go(item)">{{item.name}}</a>
            </div>
            <div class="p5 ">
              <button ion-button full color="light">重置</button>
            </div>
          </ion-col>
          <ion-col col-6 class="p0">
            <div class="leftChange updateBg">

              <ion-list radio-group>
                <ion-item *ngFor=" let items of district;let i = index" (click)="subSearch()">
                  <ion-label>{{items.name}}</ion-label>
                  <ion-radio value="{{i+1}}"></ion-radio>
                </ion-item>
              </ion-list>
              <div *ngIf="hTips">暂无该地区！</div>
            </div>
            <div class="p5 ">
              <button ion-button full color="danger">确定</button>
            </div>
          </ion-col>
        </ion-row>

      </ion-grid>


      <!-- 户型 -->
      <div class="lists houseType" *ngIf="houseType">
        <!--<h2>{{label}}</h2>-->
        <ion-list radio-group [(ngModel)]="type">
          <ion-item>
            <ion-label>不限</ion-label>
            <ion-radio value="0"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>一室</ion-label>
            <ion-radio value="1" checked></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>两室</ion-label>
            <ion-radio value="2"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>三室</ion-label>
            <ion-radio value="3"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>四室</ion-label>
            <ion-radio value="4"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>五室</ion-label>
            <ion-radio value="5"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>五室以上</ion-label>
            <ion-radio value="6"></ion-radio>
          </ion-item>
        </ion-list>
        <div class="p15 btns">
          <button ion-button full color="danger" (click)="test()">确定</button>
        </div>
      </div>

      <!-- 小区 -->
      <div class="lists houseType" *ngIf="housingEstate">
        <ion-list radio-group>
          <ion-item>
            <ion-label>xx小区</ion-label>
            <ion-radio checked="true" value="go"></ion-radio>
          </ion-item>

          <ion-item>
            <ion-label>xx小区</ion-label>
            <ion-radio value="rust"></ion-radio>
          </ion-item>
        </ion-list>
        <div class="p15 btns">
          <button ion-button full color="danger">确定</button>
        </div>
      </div>
      <!-- 更多 -->
      <div class="lists houseType" *ngIf="more">
        <ion-list radio-group>
          <ion-item>
            <ion-label>只看我的房源</ion-label>
            <ion-radio checked="true" value="go"></ion-radio>
          </ion-item>

          <ion-item>
            <ion-label>待处理申请关闭</ion-label>
            <ion-radio value="rust"></ion-radio>
          </ion-item>
        </ion-list>
        <div class="p15 btns">
          <button ion-button full color="danger">确定</button>
        </div>
      </div>

    </div>


    <ion-row class="bgWhite houseMain" *ngFor=" let item of pageData; index as i;">
      <!--<h3>{{i+1}}</h3>-->
      <ion-col col-12 (click)="goHouseDetail(item)">
        <ion-row>
          <ion-col col-4>
            <img [src]="imgHeader+pic(item?.propertyPics)" alt="" width="100%" height="120">
          </ion-col>
          <ion-col col-8>
            <div class="ellipsis">
              <font size="3">{{item.estateName}}</font>
            </div>
            <p class="m5">
              <font size="2" color="#aaa">ID:
                <span>{{item.convId}}</span>
                <span>{{item.propertyTitle}}</span>
              </font>
            </p>
            <ion-row>
              <ion-col col-5 class="p0 ellipsis">
                <font size="1" color="#aaa">
                  建面 <span>{{item.spaceSize}}m</span> <sup>2</sup>
                </font>
              </ion-col>
              <ion-col col-7 class="tr p0">
                <font color="red" size="2">

                  <span
                    *ngIf="item.propertyPriceUnit==1">{{item.propertyPrice*1/item.spaceSize*1000 | toParseInt}}</span>
                  <span *ngIf="item.propertyPriceUnit=='2'">{{item.propertyPrice*1/item.spaceSize}}</span>
                  元/m
                  <sup>2</sup>
                </font>
              </ion-col>
            </ion-row>
            <div class="tips m5">
              <a *ngFor=" let x of tagPipe(item.tagsStr)">{{tagName(x)}}</a>
            </div>
            <div>
              <font size="1" color="#aaa">
                <span>{{item.createdTime | date:'yyyy年MM月dd日'}}</span>录入</font>
              <font size="1" color="#aaa">归属人：
                <span>{{item.realtorName }}</span>
              </font>
            </div>
          </ion-col>
        </ion-row>
      </ion-col>

      <ion-col col-12 class="houseStatus">
        <ion-row>
          <ion-col col-4 class="tc" (click)="goFollow(item)">
            <a>跟进</a>
          </ion-col>
          <ion-col col-4 class="tc" (click)="goAddLook(item)">
            <a>带看</a>
          </ion-col>
          <ion-col col-4 class="tc" (click)="goCloseHouse(item)">
            <a>关闭</a>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
    <!--<ion-refresher (ionRefresh)="doRefresh($event)">-->
    <!--<ion-refresher-content-->
    <!--pullingIcon="arrow-dropdown"-->
    <!--pullingText="Pull to refresh"-->
    <!--refreshingSpinner="circles"-->
    <!--refreshingText="Refreshing...">-->
    <!--</ion-refresher-content>-->
    <!--</ion-refresher>-->

    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="加载中...">

      </ion-infinite-scroll-content>
    </ion-infinite-scroll>

  </ion-grid>

  <div class="pop" *ngIf="pop" (click)="pops()"></div>

</ion-content>





